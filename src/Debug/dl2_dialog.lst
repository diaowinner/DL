SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    1

************ OBJECT LISTING ************

FILE NAME: E:\DLsrc\dl2_dialog.c

SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

      dl2_dialog     1    #include "dl2_all.h"
      dl2_dialog     2    
      dl2_dialog     3    /*
      dl2_dialog     4            picdata of dialog icon
      dl2_dialog     5    */
      dl2_dialog     6    
      dl2_dialog     7    
      dl2_dialog     8    const uchar ICON_QUST[]=
      dl2_dialog     9    {0x7,0xE0,0x8,0x10,0x17,0xE8,0x28,0x14,0x53,0xCA,
      dl2_dialog    10    0xA7,0xE5,0xA6,0x65,0xA0,0xC5,0xA1,0x85,0xA1,0x85,
      dl2_dialog    11    0xA0,0x5,0x51,0x8A,0x28,0x14,0x17,0xE8,0x8,0x10,0x7,0xE0};
      dl2_dialog    12    
      dl2_dialog    13    const uchar ICON_WAIT[]= 
      dl2_dialog    14    {0x1F,0xF8,0x18,0x18,0x1F,0xF8,0x8,0x10,0x8,0x50,
      dl2_dialog    15    0x5,0x20,0x2,0xC0,0x3,0xC0,0x3,0x40,0x6,0xA0,
      dl2_dialog    16    0xD,0x50,0xA,0xB0,0xD,0x50,0x1F,0xF8,0x18,0x18,0x1F,0xF8};
      dl2_dialog    17    
      dl2_dialog    18    const uchar ICON_WARN[]=
      dl2_dialog    19    {0x1,0x80,0x1,0x80,0x3,0xC0,0x2,0x40,0x6,0x60,0x4,0x20,
      dl2_dialog    20    0xD,0xB0,0x9,0x90,0x19,0x98,0x11,0x88,0x31,0x8C,0x21,0x84,
      dl2_dialog    21    0x60,0x6,0x41,0x82,0xC0,0x3,0xFF,0xFF};
      dl2_dialog    22    
      dl2_dialog    23    
      dl2_dialog    24    /*
      dl2_dialog    25            dialog
      dl2_dialog    26    */
      dl2_dialog    27    
      dl2_dialog    28    int show_dialog(const uchar * caption,const uchar * text,int icon,int btn)
P   00000000              _show_dialog:                    ; function: show_dialog
                                                           ; frame size=60
    00000000 2FE6                   MOV.L       R14,@-R15
    00000002 2FD6                   MOV.L       R13,@-R15
    00000004 2FC6                   MOV.L       R12,@-R15
    00000006 2FB6                   MOV.L       R11,@-R15
    00000008 2FA6                   MOV.L       R10,@-R15
    0000000A 6A53                   MOV         R5,R10
      dl2_dialog    29    {
      dl2_dialog    30            int i;
      dl2_dialog    31            int left,top,x,y;
      dl2_dialog    32            uchar *p = NULL;
      dl2_dialog    33    
      dl2_dialog    34            select_font (sys_font);
    0000000C D335                   MOV.L       L578,R3    ; _sys_font
    0000000E 2F96                   MOV.L       R9,@-R15
    00000010 2F86                   MOV.L       R8,@-R15
    00000012 4F22                   STS.L       PR,@-R15
    00000014 D234                   MOV.L       L578+4,R2  ; _select_font
    00000016 7FEC                   ADD         #-20,R15
    00000018 1F44                   MOV.L       R4,@(16,R15)
    0000001A 1F62                   MOV.L       R6,@(8,R15)
    0000001C 1F73                   MOV.L       R7,@(12,R15)
    0000001E 420B                   JSR         @R2
    00000020 6432                   MOV.L       @R3,R4
      dl2_dialog    35    




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    2


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

      dl2_dialog    36            area_clear              (6,6,121,57,2);
    00000022 E102                   MOV         #2,R1
    00000024 D331                   MOV.L       L578+8,R3  ; _area_clear
    00000026 E739                   MOV         #57,R7
    00000028 2F16                   MOV.L       R1,@-R15
    0000002A E679                   MOV         #121,R6
    0000002C E506                   MOV         #6,R5
    0000002E 430B                   JSR         @R3
    00000030 6453                   MOV         R5,R4
    00000032 7F04                   ADD         #4,R15
      dl2_dialog    37            print_chs_str   (7,7,0,caption);
    00000034 D32E                   MOV.L       L578+12,R3 ; _print_chs_str
    00000036 E600                   MOV         #0,R6
    00000038 57F4                   MOV.L       @(16,R15),R7
    0000003A E507                   MOV         #7,R5
    0000003C 430B                   JSR         @R3
    0000003E 6453                   MOV         R5,R4
      dl2_dialog    38            area_rev                (7,7,120,14);
    00000040 D22C                   MOV.L       L578+16,R2 ; _Bdisp_AreaReverseVRAM
    00000042 E70E                   MOV         #14,R7
    00000044 E678                   MOV         #120,R6
    00000046 E507                   MOV         #7,R5
    00000048 420B                   JSR         @R2
    0000004A 6453                   MOV         R5,R4
      dl2_dialog    39    
      dl2_dialog    40            left = icon ? 32 : 8;
    0000004C 53F2                   MOV.L       @(8,R15),R3
    0000004E 2338                   TST         R3,R3
    00000050 8901                   BT          L503
    00000052 A001                   BRA         L504
    00000054 E820                   MOV         #32,R8
    00000056              L503:                             
    00000056 E808                   MOV         #8,R8
    00000058              L504:                             
      dl2_dialog    41            top  = icon ? 24 : 16;
    00000058 52F2                   MOV.L       @(8,R15),R2
    0000005A 2228                   TST         R2,R2
    0000005C 8D02                   BT/S        L505
      dl2_dialog    42    
      dl2_dialog    43            x = left,y = top;
    0000005E 6E83                   MOV         R8,R14
    00000060 A001                   BRA         L506
    00000062 E418                   MOV         #24,R4
    00000064              L505:                             
    00000064 E410                   MOV         #16,R4
    00000066              L506:                             
    00000066 6B43                   MOV         R4,R11
      dl2_dialog    44    
      dl2_dialog    45            for (i=0;text[i];++i)
    00000068 E979                   MOV         #121,R9
    0000006A A024                   BRA         L507
    0000006C EC00                   MOV         #0,R12
    0000006E              L508:                             
    0000006E 6DC3                   MOV         R12,R13
    00000070 3DAC                   ADD         R10,R13
    00000072 60D0                   MOV.B       @R13,R0
    00000074 600C                   EXTU.B      R0,R0




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    3


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    00000076 C880                   TST         #128,R0
    00000078 890B                   BT          L509
      dl2_dialog    46            {
      dl2_dialog    47                    if (text[i] & 0x80)
      dl2_dialog    48                    {
      dl2_dialog    49                            print_chs_char (x,y,0,text[i],text[i+1]);
    0000007A E600                   MOV         #0,R6
    0000007C D31E                   MOV.L       L578+20,R3 ; _print_chs_char
    0000007E 65B3                   MOV         R11,R5
    00000080 84D1                   MOV.B       @(1,R13),R0
    00000082 6203                   MOV         R0,R2
    00000084 2F06                   MOV.L       R0,@-R15
    00000086 67D0                   MOV.B       @R13,R7
    00000088 430B                   JSR         @R3
    0000008A 64E3                   MOV         R14,R4
    0000008C 7F04                   ADD         #4,R15
      dl2_dialog    50                            ++i;
    0000008E A00B                   BRA         L510
    00000090 7C01                   ADD         #1,R12
    00000092              L509:                             
      dl2_dialog    51                    }
      dl2_dialog    52                    else if (x=='\n') x=121;
    00000092 60E3                   MOV         R14,R0
    00000094 880A                   CMP/EQ      #10,R0
    00000096 8B01                   BF          L511
    00000098 A006                   BRA         L510
    0000009A 6E93                   MOV         R9,R14
    0000009C              L511:                             
      dl2_dialog    53                    else
      dl2_dialog    54                    {
      dl2_dialog    55                            print_asc_char(x,y,0,text[i]);
    0000009C 67D0                   MOV.B       @R13,R7
    0000009E E600                   MOV         #0,R6
    000000A0 D316                   MOV.L       L578+24,R3 ; _print_asc_char
    000000A2 65B3                   MOV         R11,R5
    000000A4 430B                   JSR         @R3
    000000A6 64E3                   MOV         R14,R4
    000000A8              L510:                             
      dl2_dialog    56                    }
      dl2_dialog    57                    x+=8;
    000000A8 7E08                   ADD         #8,R14
      dl2_dialog    58                    if (x>=120) x=left,y+=8;
    000000AA E278                   MOV         #120,R2
    000000AC 3E23                   CMP/GE      R2,R14
    000000AE 8F02                   BF/S        L513
    000000B0 7C01                   ADD         #1,R12
    000000B2 6E83                   MOV         R8,R14
    000000B4 7B08                   ADD         #8,R11
    000000B6              L513:                             
    000000B6              L507:                             
    000000B6 60C3                   MOV         R12,R0
    000000B8 03AC                   MOV.B       @(R0,R10),R3
    000000BA 633C                   EXTU.B      R3,R3
    000000BC 2338                   TST         R3,R3
    000000BE 8BD6                   BF          L508
      dl2_dialog    59            }
      dl2_dialog    60    




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    4


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

      dl2_dialog    61            switch(icon)
    000000C0 50F2                   MOV.L       @(8,R15),R0
    000000C2 8801                   CMP/EQ      #1,R0
    000000C4 8905                   BT          L481
    000000C6 8802                   CMP/EQ      #2,R0
    000000C8 8906                   BT          L482
    000000CA 8803                   CMP/EQ      #3,R0
    000000CC 8907                   BT          L483
    000000CE A01D                   BRA         L484
    000000D0 0009                   NOP
    000000D2              L481:                            ; case label 
      dl2_dialog    62            {
      dl2_dialog    63                    case DLG_ICON_QUST      :p=ICON_QUST;break;
    000000D2 D40B                   MOV.L       L578+28,R4 ; _ICON_QUST
    000000D4 A01B                   BRA         L514
    000000D6 0009                   NOP
    000000D8              L482:                            ; case label 
      dl2_dialog    64                    case DLG_ICON_WAIT      :p=ICON_WAIT;break;
    000000D8 D40A                   MOV.L       L578+32,R4 ; _ICON_WAIT
    000000DA A018                   BRA         L514
    000000DC 0009                   NOP
    000000DE              L483:                            ; case label 
      dl2_dialog    65                    case DLG_ICON_WARN      :p=ICON_WARN;break;
    000000DE D40A                   MOV.L       L578+36,R4 ; _ICON_WARN
    000000E0 A015                   BRA         L514
    000000E2 0009                   NOP
    000000E4              L578:                             
    000000E4 <00000000>             .DATA.L     _sys_font
    000000E8 <00000000>             .DATA.L     _select_font
    000000EC <00000000>             .DATA.L     _area_clear
    000000F0 <00000000>             .DATA.L     _print_chs_str
    000000F4 <00000000>             .DATA.L     _Bdisp_AreaReverseVRAM
    000000F8 <00000000>             .DATA.L     _print_chs_char
    000000FC <00000000>             .DATA.L     _print_asc_char
    00000100 <00000000>             .DATA.L     _ICON_QUST
    00000104 <00000000>             .DATA.L     _ICON_WAIT
    00000108 <00000000>             .DATA.L     _ICON_WARN
    0000010C              L484:                            ; default label 
      dl2_dialog    66                    default                         :p=0;break;
    0000010C E400                   MOV         #0,R4
    0000010E              L514:                             
      dl2_dialog    67            }
      dl2_dialog    68            if (p)
    0000010E 2448                   TST         R4,R4
    00000110 8909                   BT          L515
      dl2_dialog    69                    draw_picture(12,24,16,16,0,p);
    00000112 E200                   MOV         #0,R2
    00000114 D33D                   MOV.L       L579+12,R3 ; _draw_picture
    00000116 E710                   MOV         #16,R7
    00000118 2F46                   MOV.L       R4,@-R15
    0000011A E518                   MOV         #24,R5
    0000011C 2F26                   MOV.L       R2,@-R15
    0000011E 6673                   MOV         R7,R6
    00000120 430B                   JSR         @R3
    00000122 E40C                   MOV         #12,R4
    00000124 7F08                   ADD         #8,R15
    00000126              L515:                             




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    5


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

      dl2_dialog    70    
      dl2_dialog    71            if (btn==DLG_BTN_YESNO)
    00000126 DD3A                   MOV.L       L579+16,R13; _GetKey
    00000128 9E6A                   MOV.W       L579,R14   ; H'7534
    0000012A 50F3                   MOV.L       @(12,R15),R0
    0000012C 8801                   CMP/EQ      #1,R0
    0000012E 8B10                   BF          L516
      dl2_dialog    72            {
      dl2_dialog    73                    uint key;
      dl2_dialog    74                    print_chs_str(8,48,1,(uchar*)"Yes:EXE No:EXIT");
    00000130 D738                   MOV.L       L579+20,R7 ; L402
    00000132 E601                   MOV         #1,R6
    00000134 D238                   MOV.L       L579+24,R2 ; _print_chs_str
    00000136 E530                   MOV         #48,R5
    00000138 420B                   JSR         @R2
    0000013A E408                   MOV         #8,R4
      dl2_dialog    75                    while(GetKey(&key),key!=KEY_CTRL_EXE && key!=KEY_CTRL_EXIT);
    0000013C              L517:                             
    0000013C 4D0B                   JSR         @R13
    0000013E 64F3                   MOV         R15,R4
    00000140 62F2                   MOV.L       @R15,R2
    00000142 32E0                   CMP/EQ      R14,R2
    00000144 8903                   BT          L519
    00000146 915C                   MOV.W       L579+2,R1  ; H'7532
    00000148 63F2                   MOV.L       @R15,R3
    0000014A 3310                   CMP/EQ      R1,R3
    0000014C 8BF6                   BF          L517
    0000014E              L519:                             
      dl2_dialog    76                    return key;
    0000014E A010                   BRA         L520
    00000150 60F2                   MOV.L       @R15,R0
    00000152              L516:                             
      dl2_dialog    77            }
      dl2_dialog    78            else if (btn==DLG_BTN_OK)
    00000152 50F3                   MOV.L       @(12,R15),R0
    00000154 8802                   CMP/EQ      #2,R0
    00000156 8B0C                   BF          L520
      dl2_dialog    79            {
      dl2_dialog    80                    uint key;
      dl2_dialog    81                    print_chs_str(32,48,1,(uchar*)"Yes:EXE");
    00000158 D730                   MOV.L       L579+28,R7 ; L405
    0000015A E601                   MOV         #1,R6
    0000015C D22E                   MOV.L       L579+24,R2 ; _print_chs_str
    0000015E E530                   MOV         #48,R5
    00000160 420B                   JSR         @R2
    00000162 E420                   MOV         #32,R4
      dl2_dialog    82                    while(GetKey(&key),key!=KEY_CTRL_EXE);
    00000164              L523:                             
    00000164 64F3                   MOV         R15,R4
    00000166 4D0B                   JSR         @R13
    00000168 7404                   ADD         #4,R4
    0000016A 52F1                   MOV.L       @(4,R15),R2
    0000016C 32E0                   CMP/EQ      R14,R2
    0000016E 8BF9                   BF          L523
      dl2_dialog    83                    return key;
    00000170 50F1                   MOV.L       @(4,R15),R0
      dl2_dialog    84            }




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    6


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

      dl2_dialog    85    }
    00000172              L520:                             
    00000172 7F14                   ADD         #20,R15
    00000174 4F26                   LDS.L       @R15+,PR
    00000176 68F6                   MOV.L       @R15+,R8
    00000178 69F6                   MOV.L       @R15+,R9
    0000017A 6AF6                   MOV.L       @R15+,R10
    0000017C 6BF6                   MOV.L       @R15+,R11
    0000017E 6CF6                   MOV.L       @R15+,R12
    00000180 6DF6                   MOV.L       @R15+,R13
    00000182 000B                   RTS
    00000184 6EF6                   MOV.L       @R15+,R14
      dl2_dialog    86    
      dl2_dialog    87    /*
      dl2_dialog    88            file view
      dl2_dialog    89    */
      dl2_dialog    90    
      dl2_dialog    91    int file_view (int root,const char * filter,char * cfname)
    00000186              _file_view:                      ; function: file_view
                                                           ; frame size=300
      dl2_dialog    92    {
      dl2_dialog    93            char                    strtemp[32];
      dl2_dialog    94            fontc                   fnttemp[32];
      dl2_dialog    95            fontc                   fntpath[32];
      dl2_dialog    96            char                    **clist;
      dl2_dialog    97            uint                    key;
      dl2_dialog    98            list                    lfile;
      dl2_dialog    99            int                             fh_find;
      dl2_dialog   100            node                    *nnode;
      dl2_dialog   101            int                             i,top,bottom,index,refresh;
      dl2_dialog   102            const int               h_max = 6-1;
    00000186 E305                   MOV         #5,R3
    00000188 2FE6                   MOV.L       R14,@-R15
    0000018A 2FD6                   MOV.L       R13,@-R15
    0000018C 2FC6                   MOV.L       R12,@-R15
    0000018E 2FB6                   MOV.L       R11,@-R15
    00000190 2FA6                   MOV.L       R10,@-R15
    00000192 2F96                   MOV.L       R9,@-R15
    00000194 2F86                   MOV.L       R8,@-R15
    00000196 4F22                   STS.L       PR,@-R15
    00000198 9034                   MOV.W       L579+4,R0  ; H'FF00
    0000019A 3F0C                   ADD         R0,R15
    0000019C 1F43                   MOV.L       R4,@(12,R15)
      dl2_dialog   103            FILE_INFO               file_info;
      dl2_dialog   104    
      dl2_dialog   105            list_init(&lfile);
    0000019E 64F3                   MOV         R15,R4
    000001A0 1F51                   MOV.L       R5,@(4,R15)
    000001A2 1F65                   MOV.L       R6,@(20,R15)
    000001A4 1F36                   MOV.L       R3,@(24,R15)
    000001A6 D31E                   MOV.L       L579+32,R3 ; _list_init
    000001A8 430B                   JSR         @R3
    000001AA 7454                   ADD         #84,R4
      dl2_dialog   106    
      dl2_dialog   107            sprintf(strtemp,"\\\\%s\\*.%s",root ? "fls0":"crd0",filter);
    000001AC 9D2B                   MOV.W       L579+6,R13 ; H'00E0
    000001AE 3DFC                   ADD         R15,R13




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    7


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    000001B0 52F1                   MOV.L       @(4,R15),R2
    000001B2 2F26                   MOV.L       R2,@-R15
    000001B4 53F4                   MOV.L       @(16,R15),R3
    000001B6 2338                   TST         R3,R3
    000001B8 8903                   BT          L525
    000001BA D31A                   MOV.L       L579+36,R3 ; L426
    000001BC 2F36                   MOV.L       R3,@-R15
    000001BE A002                   BRA         L526
    000001C0 0009                   NOP
    000001C2              L525:                             
    000001C2 D219                   MOV.L       L579+40,R2 ; L427
    000001C4 2F26                   MOV.L       R2,@-R15
    000001C6              L526:                             
    000001C6 D119                   MOV.L       L579+44,R1 ; L425
    000001C8 D319                   MOV.L       L579+48,R3 ; _sprintf
    000001CA 2F16                   MOV.L       R1,@-R15
    000001CC 430B                   JSR         @R3
    000001CE 64D3                   MOV         R13,R4
      dl2_dialog   108            char_to_font(strtemp,fntpath);
    000001D0 D218                   MOV.L       L579+52,R2 ; _char_to_font
    000001D2 7F0C                   ADD         #12,R15
    000001D4 65F3                   MOV         R15,R5
    000001D6 7560                   ADD         #96,R5
    000001D8 420B                   JSR         @R2
    000001DA 64D3                   MOV         R13,R4
      dl2_dialog   109    
      dl2_dialog   110            if(Bfile_FindFirst (fntpath,&fh_find,fnttemp,&file_info)!=0)
    000001DC 9E14                   MOV.W       L579+8,R14 ; H'00A0
    000001DE 67F3                   MOV         R15,R7
    000001E0 D315                   MOV.L       L579+56,R3 ; _Bfile_FindFirst
    000001E2 65F3                   MOV         R15,R5
    000001E4 3EFC                   ADD         R15,R14
    000001E6 7740                   ADD         #64,R7
    000001E8 66E3                   MOV         R14,R6
    000001EA 7508                   ADD         #8,R5
    000001EC 64F3                   MOV         R15,R4
    000001EE 430B                   JSR         @R3
    000001F0 7460                   ADD         #96,R4
    000001F2 2008                   TST         R0,R0
    000001F4 8924                   BT          L527
      dl2_dialog   111            {
      dl2_dialog   112                    Bfile_FindClose(fh_find);
    000001F6 D311                   MOV.L       L579+60,R3 ; _Bfile_FindClose
    000001F8 430B                   JSR         @R3
    000001FA 54F2                   MOV.L       @(8,R15),R4
      dl2_dialog   113                    return -1;
    000001FC A148                   BRA         L528
    000001FE E0FF                   MOV         #-1,R0
    00000200              L579:                             
    00000200 7534                   .DATA.W     H'7534
    00000202 7532                   .DATA.W     H'7532
    00000204 FF00                   .DATA.W     H'FF00
    00000206 00E0                   .DATA.W     H'00E0
    00000208 00A0                   .DATA.W     H'00A0
    0000020A 0000                   .DATA.W     0
    0000020C <00000000>             .DATA.L     _draw_picture
    00000210 <00000000>             .DATA.L     _GetKey




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    8


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    00000214 <00000000>             .DATA.L     L402
    00000218 <00000000>             .DATA.L     _print_chs_str
    0000021C <00000000>             .DATA.L     L405
    00000220 <00000000>             .DATA.L     _list_init
    00000224 <00000000>             .DATA.L     L426
    00000228 <00000000>             .DATA.L     L427
    0000022C <00000000>             .DATA.L     L425
    00000230 <00000000>             .DATA.L     _sprintf
    00000234 <00000000>             .DATA.L     _char_to_font
    00000238 <00000000>             .DATA.L     _Bfile_FindFirst
    0000023C <00000000>             .DATA.L     _Bfile_FindClose
    00000240              L527:                             
    00000240 DA1A                   MOV.L       L580+2,R10 ; _list_push
    00000242 DB1B                   MOV.L       L580+6,R11 ; _font_to_char
    00000244 DC1B                   MOV.L       L580+10,R12; _Bfile_FindNext
      dl2_dialog   114            }
      dl2_dialog   115    
      dl2_dialog   116            do
    00000246              L529:                             
      dl2_dialog   117            {
      dl2_dialog   118                    list_push(&lfile,font_to_char(fnttemp,strtemp));
    00000246 65D3                   MOV         R13,R5
    00000248 4B0B                   JSR         @R11
    0000024A 64E3                   MOV         R14,R4
    0000024C 6503                   MOV         R0,R5
    0000024E 64F3                   MOV         R15,R4
    00000250 4A0B                   JSR         @R10
    00000252 7454                   ADD         #84,R4
      dl2_dialog   119            }
      dl2_dialog   120            while(Bfile_FindNext(fh_find,fnttemp,&file_info)==0);
    00000254 66F3                   MOV         R15,R6
    00000256 7640                   ADD         #64,R6
    00000258 65E3                   MOV         R14,R5
    0000025A 4C0B                   JSR         @R12
    0000025C 54F2                   MOV.L       @(8,R15),R4
    0000025E 2008                   TST         R0,R0
    00000260 89F1                   BT          L529
      dl2_dialog   121    
      dl2_dialog   122            Bfile_FindClose(fh_find);
    00000262 D315                   MOV.L       L580+14,R3 ; _Bfile_FindClose
    00000264 430B                   JSR         @R3
    00000266 54F2                   MOV.L       @(8,R15),R4
      dl2_dialog   123    
      dl2_dialog   124            clist = (char**)malloc(sizeof(char**)*lfile.size);
    00000268 D314                   MOV.L       L580+18,R3 ; _malloc
    0000026A E05C                   MOV         #92,R0
    0000026C 04FE                   MOV.L       @(R0,R15),R4
    0000026E 430B                   JSR         @R3
    00000270 4408                   SHLL2       R4
    00000272 6A03                   MOV         R0,R10
      dl2_dialog   125            
      dl2_dialog   126            for (i=0,nnode=lfile.head;nnode!=NULL;nnode=nnode->next,++i)
    00000274 E900                   MOV         #0,R9
    00000276 6593                   MOV         R9,R5
    00000278 E054                   MOV         #84,R0
    0000027A A006                   BRA         L530
    0000027C 04FE                   MOV.L       @(R0,R15),R4




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    9


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    0000027E              L531:                             
      dl2_dialog   127            {
      dl2_dialog   128                    clist[i] = nnode->str;
    0000027E 6053                   MOV         R5,R0
    00000280 4008                   SHLL2       R0
    00000282 6343                   MOV         R4,R3
    00000284 0A46                   MOV.L       R4,@(R0,R10)
    00000286 7501                   ADD         #1,R5
    00000288 5446                   MOV.L       @(24,R4),R4
    0000028A              L530:                             
    0000028A 2448                   TST         R4,R4
    0000028C 8BF7                   BF          L531
      dl2_dialog   129            }
      dl2_dialog   130    
      dl2_dialog   131            select_font (sys_font);
    0000028E D30C                   MOV.L       L580+22,R3 ; _sys_font
    00000290 D20C                   MOV.L       L580+26,R2 ; _select_font
    00000292 420B                   JSR         @R2
    00000294 6432                   MOV.L       @R3,R4
      dl2_dialog   132    
      dl2_dialog   133            /* draw_title & icon */
      dl2_dialog   134            {
      dl2_dialog   135                    char temp[32];
      dl2_dialog   136                    all_clr();
    00000296 D10C                   MOV.L       L580+30,R1 ; _Bdisp_AllClr_VRAM
    00000298 410B                   JSR         @R1
    0000029A 0009                   NOP
      dl2_dialog   137                    sprintf(temp,"Open %s in %s",filter,root ? "Sto":"SD");
    0000029C 52F3                   MOV.L       @(12,R15),R2
    0000029E 2228                   TST         R2,R2
    000002A0 8916                   BT          L532
    000002A2 D20A                   MOV.L       L580+34,R2 ; L435
    000002A4 2F26                   MOV.L       R2,@-R15
    000002A6 A015                   BRA         L533
    000002A8 0009                   NOP
    000002AA              L580:                             
    000002AA 0000                   .DATA.W     0
    000002AC <00000000>             .DATA.L     _list_push
    000002B0 <00000000>             .DATA.L     _font_to_char
    000002B4 <00000000>             .DATA.L     _Bfile_FindNext
    000002B8 <00000000>             .DATA.L     _Bfile_FindClose
    000002BC <00000000>             .DATA.L     _malloc
    000002C0 <00000000>             .DATA.L     _sys_font
    000002C4 <00000000>             .DATA.L     _select_font
    000002C8 <00000000>             .DATA.L     _Bdisp_AllClr_VRAM
    000002CC <00000000>             .DATA.L     L435
    000002D0              L532:                             
    000002D0 D347                   MOV.L       L581+2,R3  ; L436
    000002D2 2F36                   MOV.L       R3,@-R15
    000002D4              L533:                             
    000002D4 51F2                   MOV.L       @(8,R15),R1
    000002D6 2F16                   MOV.L       R1,@-R15
    000002D8 D346                   MOV.L       L581+6,R3  ; L434
    000002DA 2F36                   MOV.L       R3,@-R15
    000002DC D246                   MOV.L       L581+10,R2 ; _sprintf
    000002DE 64F3                   MOV         R15,R4
    000002E0 420B                   JSR         @R2




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   10


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    000002E2 742C                   ADD         #44,R4
      dl2_dialog   138                    print_chs_str(0,0,0,(const uchar*)temp);
    000002E4 D345                   MOV.L       L581+14,R3 ; _print_chs_str
    000002E6 7F0C                   ADD         #12,R15
    000002E8 67F3                   MOV         R15,R7
    000002EA 7720                   ADD         #32,R7
    000002EC E600                   MOV         #0,R6
    000002EE 6563                   MOV         R6,R5
    000002F0 430B                   JSR         @R3
    000002F2 6463                   MOV         R6,R4
      dl2_dialog   139                    area_rev(0,0,127,7);
    000002F4 D242                   MOV.L       L581+18,R2 ; _Bdisp_AreaReverseVRAM
    000002F6 E707                   MOV         #7,R7
    000002F8 E67F                   MOV         #127,R6
    000002FA E500                   MOV         #0,R5
    000002FC 420B                   JSR         @R2
    000002FE 6453                   MOV         R5,R4
      dl2_dialog   140    
      dl2_dialog   141                    print_chs_str(0,56,0,(uchar*)"Sel:EXE Can:EXIT");
    00000300 D740                   MOV.L       L581+22,R7 ; L437
    00000302 E600                   MOV         #0,R6
    00000304 D33D                   MOV.L       L581+14,R3 ; _print_chs_str
    00000306 E538                   MOV         #56,R5
    00000308 430B                   JSR         @R3
    0000030A 6463                   MOV         R6,R4
      dl2_dialog   142                    area_rev(0,56,127,63);
    0000030C D23C                   MOV.L       L581+18,R2 ; _Bdisp_AreaReverseVRAM
    0000030E E73F                   MOV         #63,R7
    00000310 E67F                   MOV         #127,R6
    00000312 E538                   MOV         #56,R5
    00000314 420B                   JSR         @R2
    00000316 E400                   MOV         #0,R4
    00000318 D83B                   MOV.L       L581+26,R8 ; _locate
      dl2_dialog   143    
      dl2_dialog   144            }
      dl2_dialog   145            /* select file */
      dl2_dialog   146    
      dl2_dialog   147            index = 0,refresh = 1;
    0000031A EE00                   MOV         #0,R14
    0000031C E301                   MOV         #1,R3
    0000031E 1F37                   MOV.L       R3,@(28,R15)
      dl2_dialog   148            while(1)
    00000320              L535:                             
    00000320 53F7                   MOV.L       @(28,R15),R3
    00000322 E05C                   MOV         #92,R0
    00000324 04FE                   MOV.L       @(R0,R15),R4
    00000326 2338                   TST         R3,R3
    00000328 8D50                   BT/S        L536
    0000032A 74FF                   ADD         #-1,R4
      dl2_dialog   149            {
      dl2_dialog   150                    if (refresh)
      dl2_dialog   151                    {
      dl2_dialog   152                            int y;
      dl2_dialog   153    
      dl2_dialog   154                            if (bottom-top>h_max)bottom = top + h_max;
    0000032C 52F6                   MOV.L       @(24,R15),R2
    0000032E 63D3                   MOV         R13,R3




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   11


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    00000330 33B8                   SUB         R11,R3
    00000332 3327                   CMP/GT      R2,R3
    00000334 8B01                   BF          L537
    00000336 6DB3                   MOV         R11,R13
    00000338 7D05                   ADD         #5,R13
    0000033A              L537:                             
      dl2_dialog   155                            if(top>index)
    0000033A 3BE7                   CMP/GT      R14,R11
    0000033C 8B02                   BF          L538
      dl2_dialog   156                            {
      dl2_dialog   157                                    top = index;
    0000033E 6BE3                   MOV         R14,R11
      dl2_dialog   158                                    bottom = index + h_max;
    00000340 6DE3                   MOV         R14,R13
    00000342 7D05                   ADD         #5,R13
    00000344              L538:                             
      dl2_dialog   159                            }
      dl2_dialog   160                            if (index>bottom)
    00000344 3ED7                   CMP/GT      R13,R14
    00000346 8B02                   BF          L539
      dl2_dialog   161                            {
      dl2_dialog   162                                    bottom = index;
    00000348 6DE3                   MOV         R14,R13
      dl2_dialog   163                                    top = bottom - h_max;
    0000034A 6BE3                   MOV         R14,R11
    0000034C 7BFB                   ADD         #-5,R11
    0000034E              L539:                             
      dl2_dialog   164                            }
      dl2_dialog   165                            if(bottom>lfile.size - 1)bottom = lfile.size - 1;
    0000034E 3D47                   CMP/GT      R4,R13
    00000350 8F01                   BF/S        L540
      dl2_dialog   166    
      dl2_dialog   167                            area_clear(0,8,127,55,0);
    00000352 2F96                   MOV.L       R9,@-R15
    00000354 6D43                   MOV         R4,R13
    00000356              L540:                             
    00000356 E737                   MOV         #55,R7
    00000358 D32C                   MOV.L       L581+30,R3 ; _area_clear
    0000035A E67F                   MOV         #127,R6
    0000035C E508                   MOV         #8,R5
    0000035E 430B                   JSR         @R3
    00000360 E400                   MOV         #0,R4
      dl2_dialog   168    
      dl2_dialog   169                            if(top>0)
    00000362 4B15                   CMP/PL      R11
    00000364 8F07                   BF/S        L541
    00000366 7F04                   ADD         #4,R15
      dl2_dialog   170                                    {locate(21,2);Print((uchar*)"\xE6\x92");}
    00000368 E502                   MOV         #2,R5
    0000036A 480B                   JSR         @R8
    0000036C E415                   MOV         #21,R4
    0000036E D428                   MOV.L       L581+34,R4 ; L444
    00000370 D328                   MOV.L       L581+38,R3 ; _Print
    00000372 430B                   JSR         @R3
    00000374 0009                   NOP
    00000376              L541:                             
      dl2_dialog   171                            if(bottom<lfile.size-1)




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   12


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    00000376 E05C                   MOV         #92,R0
    00000378 02FE                   MOV.L       @(R0,R15),R2
    0000037A 72FF                   ADD         #-1,R2
    0000037C 3D23                   CMP/GE      R2,R13
    0000037E 8906                   BT          L542
      dl2_dialog   172                                    {locate(21,7);Print((uchar*)"\xE6\x93");}
    00000380 E507                   MOV         #7,R5
    00000382 480B                   JSR         @R8
    00000384 E415                   MOV         #21,R4
    00000386 D424                   MOV.L       L581+42,R4 ; L446
    00000388 D222                   MOV.L       L581+38,R2 ; _Print
    0000038A 420B                   JSR         @R2
    0000038C 0009                   NOP
    0000038E              L542:                             
      dl2_dialog   173    
      dl2_dialog   174                            for (i=top;i<=bottom;++i)
    0000038E 6CB3                   MOV         R11,R12
    00000390 3CD7                   CMP/GT      R13,R12
    00000392 891B                   BT          L536
    00000394              L544:                             
      dl2_dialog   175                            {
      dl2_dialog   176                                    y = i-top+1;
    00000394 62C3                   MOV         R12,R2
    00000396 32B8                   SUB         R11,R2
    00000398 7201                   ADD         #1,R2
      dl2_dialog   177                                    locate(2,y+1);Print((uchar*)clist[i]);
    0000039A 6523                   MOV         R2,R5
    0000039C 1F21                   MOV.L       R2,@(4,R15)
    0000039E 7501                   ADD         #1,R5
    000003A0 480B                   JSR         @R8
    000003A2 E402                   MOV         #2,R4
    000003A4 D31B                   MOV.L       L581+38,R3 ; _Print
    000003A6 60C3                   MOV         R12,R0
    000003A8 4008                   SHLL2       R0
    000003AA 430B                   JSR         @R3
    000003AC 04AE                   MOV.L       @(R0,R10),R4
      dl2_dialog   178                                    if(index==i)area_rev(0,y*8,127,7+y*8);  
    000003AE 3EC0                   CMP/EQ      R12,R14
    000003B0 8B09                   BF          L545
    000003B2 E67F                   MOV         #127,R6
    000003B4 D312                   MOV.L       L581+18,R3 ; _Bdisp_AreaReverseVRAM
    000003B6 57F1                   MOV.L       @(4,R15),R7
    000003B8 4708                   SHLL2       R7
    000003BA 4700                   SHLL        R7
    000003BC 1F74                   MOV.L       R7,@(16,R15)
    000003BE 7707                   ADD         #7,R7
    000003C0 55F4                   MOV.L       @(16,R15),R5
    000003C2 430B                   JSR         @R3
    000003C4 E400                   MOV         #0,R4
    000003C6              L545:                             
    000003C6 7C01                   ADD         #1,R12
    000003C8 3CD7                   CMP/GT      R13,R12
    000003CA 8BE3                   BF          L544
    000003CC              L536:                             
      dl2_dialog   179                            }
      dl2_dialog   180                    }
      dl2_dialog   181                    GetKey(&key);




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   13


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    000003CC D313                   MOV.L       L581+46,R3 ; _GetKey
    000003CE 430B                   JSR         @R3
    000003D0 64F3                   MOV         R15,R4
    000003D2 E05C                   MOV         #92,R0
    000003D4 930B                   MOV.W       L581,R3    ; H'7542
    000003D6 04FE                   MOV.L       @(R0,R15),R4
    000003D8 62F2                   MOV.L       @R15,R2
    000003DA 3230                   CMP/EQ      R3,R2
    000003DC 8F21                   BF/S        L546
    000003DE 74FF                   ADD         #-1,R4
      dl2_dialog   182    
      dl2_dialog   183                    if (key==KEY_CTRL_UP) 
      dl2_dialog   184                            {if(--index<0) index = lfile.size - 1;refresh = 1;}
    000003E0 7EFF                   ADD         #-1,R14
    000003E2 4E11                   CMP/PZ      R14
    000003E4 8D01                   BT/S        L547
    000003E6 E301                   MOV         #1,R3
    000003E8 6E43                   MOV         R4,R14
    000003EA              L547:                             
    000003EA A019                   BRA         L575
    000003EC 0009                   NOP
    000003EE              L581:                             
    000003EE 7542                   .DATA.W     H'7542
    000003F0 <00000000>             .DATA.L     L436
    000003F4 <00000000>             .DATA.L     L434
    000003F8 <00000000>             .DATA.L     _sprintf
    000003FC <00000000>             .DATA.L     _print_chs_str
    00000400 <00000000>             .DATA.L     _Bdisp_AreaReverseVRAM
    00000404 <00000000>             .DATA.L     L437
    00000408 <00000000>             .DATA.L     _locate
    0000040C <00000000>             .DATA.L     _area_clear
    00000410 <00000000>             .DATA.L     L444
    00000414 <00000000>             .DATA.L     _Print
    00000418 <00000000>             .DATA.L     L446
    0000041C <00000000>             .DATA.L     _GetKey
    00000420              L575:                             
    00000420 1F37                   MOV.L       R3,@(28,R15)
    00000422              L546:                             
      dl2_dialog   185                    if (key==KEY_CTRL_DOWN)
    00000422 9251                   MOV.W       L582,R2    ; H'7547
    00000424 61F2                   MOV.L       @R15,R1
    00000426 3120                   CMP/EQ      R2,R1
    00000428 8B05                   BF          L548
      dl2_dialog   186                            {if(++index>lfile.size - 1) index = 0;refresh = 1;}
    0000042A 7E01                   ADD         #1,R14
    0000042C 3E47                   CMP/GT      R4,R14
    0000042E 8F01                   BF/S        L549
    00000430 E301                   MOV         #1,R3
    00000432 6E93                   MOV         R9,R14
    00000434              L549:                             
    00000434 1F37                   MOV.L       R3,@(28,R15)
    00000436              L548:                             
      dl2_dialog   187                    if (key==KEY_CTRL_EXIT)
    00000436 9248                   MOV.W       L582+2,R2  ; H'7532
    00000438 61F2                   MOV.L       @R15,R1
    0000043A 3120                   CMP/EQ      R2,R1
    0000043C 8920                   BT          L476




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   14


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

      dl2_dialog   188                    {
      dl2_dialog   189                            free(clist);
      dl2_dialog   190                            list_destory(&lfile);
      dl2_dialog   191                    
      dl2_dialog   192                            return 0;
      dl2_dialog   193                    }
      dl2_dialog   194                    if (key==KEY_CTRL_EXE)
    0000043E 9245                   MOV.W       L582+4,R2  ; H'7534
    00000440 63F2                   MOV.L       @R15,R3
    00000442 3320                   CMP/EQ      R2,R3
    00000444 8901                   BT          L583
    00000446 AF6B                   BRA         L535
    00000448 0009                   NOP
    0000044A              L583:                             
      dl2_dialog   195                    {
      dl2_dialog   196                            //strcpy(cfname,clist[index]);
      dl2_dialog   197                            sprintf(cfname,"\\\\%s\\%s",root ? "fls0":"crd0",clist[index]);
    0000044A 60E3                   MOV         R14,R0
    0000044C 4008                   SHLL2       R0
    0000044E 03AE                   MOV.L       @(R0,R10),R3
    00000450 2F36                   MOV.L       R3,@-R15
    00000452 51F4                   MOV.L       @(16,R15),R1
    00000454 2118                   TST         R1,R1
    00000456 8902                   BT          L552
    00000458 D11D                   MOV.L       L582+8,R1  ; L426
    0000045A A002                   BRA         L553
    0000045C 2F16                   MOV.L       R1,@-R15
    0000045E              L552:                             
    0000045E D31D                   MOV.L       L582+12,R3 ; L427
    00000460 2F36                   MOV.L       R3,@-R15
    00000462              L553:                             
    00000462 D11D                   MOV.L       L582+16,R1 ; L453
    00000464 D31D                   MOV.L       L582+20,R3 ; _sprintf
    00000466 2F16                   MOV.L       R1,@-R15
    00000468 430B                   JSR         @R3
    0000046A 54F8                   MOV.L       @(32,R15),R4
      dl2_dialog   198                            free(clist);
    0000046C D21C                   MOV.L       L582+24,R2 ; _free
    0000046E 7F0C                   ADD         #12,R15
    00000470 420B                   JSR         @R2
    00000472 64A3                   MOV         R10,R4
      dl2_dialog   199                            list_destory(&lfile);
    00000474 D31B                   MOV.L       L582+28,R3 ; _list_destory
    00000476 64F3                   MOV         R15,R4
    00000478 430B                   JSR         @R3
    0000047A 7454                   ADD         #84,R4
      dl2_dialog   200                    
      dl2_dialog   201                            return 1;
    0000047C A008                   BRA         L528
    0000047E E001                   MOV         #1,R0
    00000480              L476:
      dl2_dialog   202                    }
      dl2_dialog   203    
      dl2_dialog   204            }
      dl2_dialog   205    
      dl2_dialog   206            free(clist);
    00000480 D317                   MOV.L       L582+24,R3 ; _free




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   15


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    00000482 430B                   JSR         @R3
    00000484 64A3                   MOV         R10,R4
      dl2_dialog   207            list_destory(&lfile);
    00000486 64F3                   MOV         R15,R4
    00000488 D216                   MOV.L       L582+28,R2 ; _list_destory
    0000048A 420B                   JSR         @R2
    0000048C 7454                   ADD         #84,R4
      dl2_dialog   208    
      dl2_dialog   209            return 0;
    0000048E E000                   MOV         #0,R0
      dl2_dialog   210    }
    00000490              L528:                             
    00000490 911D                   MOV.W       L582+6,R1  ; H'0100
    00000492 3F1C                   ADD         R1,R15
    00000494 4F26                   LDS.L       @R15+,PR
    00000496 68F6                   MOV.L       @R15+,R8
    00000498 69F6                   MOV.L       @R15+,R9
    0000049A 6AF6                   MOV.L       @R15+,R10
    0000049C 6BF6                   MOV.L       @R15+,R11
    0000049E 6CF6                   MOV.L       @R15+,R12
    000004A0 6DF6                   MOV.L       @R15+,R13
    000004A2 000B                   RTS
    000004A4 6EF6                   MOV.L       @R15+,R14
      dl2_dialog   211    
      dl2_dialog   212    char dGetKeyChar (uint key)
    000004A6              _dGetKeyChar:                    ; function: dGetKeyChar
                                                           ; frame size=0
      dl2_dialog   213    {
      dl2_dialog   214            if (key>=KEY_CHAR_A && key<=KEY_CHAR_Z)
    000004A6 E341                   MOV         #65,R3
    000004A8 3432                   CMP/HS      R3,R4
    000004AA 8B02                   BF          L554
    000004AC E15A                   MOV         #90,R1
    000004AE 3416                   CMP/HI      R1,R4
    000004B0 8B05                   BF          L477
    000004B2              L554:                             
      dl2_dialog   215                    return key;
      dl2_dialog   216    
      dl2_dialog   217            else if (key>=KEY_CHAR_0 && key<= KEY_CHAR_9)
    000004B2 E330                   MOV         #48,R3
    000004B4 3432                   CMP/HS      R3,R4
    000004B6 8B04                   BF          L556
    000004B8 E139                   MOV         #57,R1
    000004BA 3416                   CMP/HI      R1,R4
    000004BC 8901                   BT          L556
    000004BE              L477:
      dl2_dialog   218                    return key;
    000004BE 000B                   RTS
    000004C0 6043                   MOV         R4,R0
    000004C2              L556:                             
      dl2_dialog   219    
      dl2_dialog   220            return 0;
    000004C2 E000                   MOV         #0,R0
      dl2_dialog   221    }
    000004C4              L555:                             
    000004C4 000B                   RTS
    000004C6 0009                   NOP




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   16


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    000004C8              L582:                             
    000004C8 7547                   .DATA.W     H'7547
    000004CA 7532                   .DATA.W     H'7532
    000004CC 7534                   .DATA.W     H'7534
    000004CE 0100                   .DATA.W     H'0100
    000004D0 <00000000>             .DATA.L     L426
    000004D4 <00000000>             .DATA.L     L427
    000004D8 <00000000>             .DATA.L     L453
    000004DC <00000000>             .DATA.L     _sprintf
    000004E0 <00000000>             .DATA.L     _free
    000004E4 <00000000>             .DATA.L     _list_destory
      dl2_dialog   222    
      dl2_dialog   223    int get_line_box (char * s,int max,int width,int x,int y)
    000004E8              _get_line_box:                   ; function: get_line_box
                                                           ; frame size=60
    000004E8 2FE6                   MOV.L       R14,@-R15
    000004EA 2FD6                   MOV.L       R13,@-R15
    000004EC 2FC6                   MOV.L       R12,@-R15
    000004EE 6C43                   MOV         R4,R12
      dl2_dialog   224    {
      dl2_dialog   225            int             pos = strlen(s);
    000004F0 D340                   MOV.L       L584+8,R3  ; _strlen
    000004F2 2FB6                   MOV.L       R11,@-R15
    000004F4 2FA6                   MOV.L       R10,@-R15
    000004F6 6A73                   MOV         R7,R10
    000004F8 2F96                   MOV.L       R9,@-R15
    000004FA 2F86                   MOV.L       R8,@-R15
    000004FC 4F22                   STS.L       PR,@-R15
    000004FE 6863                   MOV         R6,R8
    00000500 7FE8                   ADD         #-24,R15
    00000502 1F53                   MOV.L       R5,@(12,R15)
    00000504 430B                   JSR         @R3
    00000506 64C3                   MOV         R12,R4
    00000508 52FE                   MOV.L       @(56,R15),R2
    0000050A 6383                   MOV         R8,R3
    0000050C 6D03                   MOV         R0,R13
      dl2_dialog   226            int             refresh = 1;
    0000050E EB01                   MOV         #1,R11
    00000510 720A                   ADD         #10,R2
    00000512 73FF                   ADD         #-1,R3
    00000514 1F24                   MOV.L       R2,@(16,R15)
    00000516 61A3                   MOV         R10,R1
    00000518 1F32                   MOV.L       R3,@(8,R15)
    0000051A 7101                   ADD         #1,R1
    0000051C 59FE                   MOV.L       @(56,R15),R9
    0000051E 7902                   ADD         #2,R9
    00000520 1F11                   MOV.L       R1,@(4,R15)
    00000522 52F2                   MOV.L       @(8,R15),R2
    00000524 6023                   MOV         R2,R0
    00000526 4200                   SHLL        R2
    00000528 4008                   SHLL2       R0
    0000052A 320C                   ADD         R0,R2
    0000052C 32AC                   ADD         R10,R2
    0000052E 7201                   ADD         #1,R2
    00000530 1F25                   MOV.L       R2,@(20,R15)
      dl2_dialog   227            uint    key;
      dl2_dialog   228            char    c;




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   17


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

      dl2_dialog   229            
      dl2_dialog   230            while(1)
    00000532              L559:                             
      dl2_dialog   231            {
      dl2_dialog   232                    if (refresh)
    00000532 2BB8                   TST         R11,R11
    00000534 8D32                   BT/S        L560
    00000536 EE00                   MOV         #0,R14
      dl2_dialog   233                    {
      dl2_dialog   234                            area_clear(x,y,x+width*6+2,y+10,2);
    00000538 EB02                   MOV         #2,R11
    0000053A 6683                   MOV         R8,R6
    0000053C 2FB6                   MOV.L       R11,@-R15
    0000053E 6383                   MOV         R8,R3
    00000540 57F5                   MOV.L       @(20,R15),R7
    00000542 4600                   SHLL        R6
    00000544 55FF                   MOV.L       @(60,R15),R5
    00000546 4308                   SHLL2       R3
    00000548 363C                   ADD         R3,R6
    0000054A 36AC                   ADD         R10,R6
    0000054C D32A                   MOV.L       L584+12,R3 ; _area_clear
    0000054E 7602                   ADD         #2,R6
    00000550 430B                   JSR         @R3
    00000552 64A3                   MOV         R10,R4
      dl2_dialog   235    
      dl2_dialog   236                            if (pos<width-1)
    00000554 DB29                   MOV.L       L584+16,R11; _PrintXY
    00000556 7F04                   ADD         #4,R15
    00000558 52F2                   MOV.L       @(8,R15),R2
    0000055A 3D23                   CMP/GE      R2,R13
    0000055C 890F                   BT          L561
      dl2_dialog   237                            {
      dl2_dialog   238                                    PrintXY (x+1,y+2,(uchar*)s,0);
    0000055E E700                   MOV         #0,R7
    00000560 66C3                   MOV         R12,R6
    00000562 6593                   MOV         R9,R5
    00000564 4B0B                   JSR         @R11
    00000566 54F1                   MOV.L       @(4,R15),R4
      dl2_dialog   239                                    PrintXY (x+1+pos*6,y+2,(uchar*)"_",0);
    00000568 D625                   MOV.L       L584+20,R6 ; L470
    0000056A 6593                   MOV         R9,R5
    0000056C E700                   MOV         #0,R7
    0000056E 64D3                   MOV         R13,R4
    00000570 63D3                   MOV         R13,R3
    00000572 4400                   SHLL        R4
    00000574 4308                   SHLL2       R3
    00000576 343C                   ADD         R3,R4
    00000578 34AC                   ADD         R10,R4
    0000057A A00C                   BRA         L576
    0000057C 7401                   ADD         #1,R4
    0000057E              L561:                             
      dl2_dialog   240                            }
      dl2_dialog   241                            else
      dl2_dialog   242                            {
      dl2_dialog   243                                    PrintXY (x+1,y+2,(uchar*)(s+pos-width+1),0);
    0000057E E700                   MOV         #0,R7
    00000580 66D3                   MOV         R13,R6




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   18


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    00000582 3688                   SUB         R8,R6
    00000584 36CC                   ADD         R12,R6
    00000586 7601                   ADD         #1,R6
    00000588 6593                   MOV         R9,R5
    0000058A 4B0B                   JSR         @R11
    0000058C 54F1                   MOV.L       @(4,R15),R4
      dl2_dialog   244                                    PrintXY (x+1+(width-1)*6,y+2,(uchar*)"_",0);
    0000058E E700                   MOV         #0,R7
    00000590 D61B                   MOV.L       L584+20,R6 ; L470
    00000592 6593                   MOV         R9,R5
    00000594 54F5                   MOV.L       @(20,R15),R4
    00000596              L576:                             
    00000596 4B0B                   JSR         @R11
    00000598 0009                   NOP
      dl2_dialog   245                            }
      dl2_dialog   246                            refresh = 0;
    0000059A 6BE3                   MOV         R14,R11
    0000059C              L560:                             
      dl2_dialog   247                    }
      dl2_dialog   248    
      dl2_dialog   249                    GetKey(&key);
    0000059C D319                   MOV.L       L584+24,R3 ; _GetKey
    0000059E 430B                   JSR         @R3
    000005A0 64F3                   MOV         R15,R4
      dl2_dialog   250    
      dl2_dialog   251                    if ((c=dGetKeyChar(key))!=0)
    000005A2 BF80                   BSR         _dGetKeyChar
    000005A4 64F2                   MOV.L       @R15,R4
    000005A6 6403                   MOV         R0,R4
    000005A8 600E                   EXTS.B      R0,R0
    000005AA 2008                   TST         R0,R0
    000005AC 8908                   BT          L563
      dl2_dialog   252                    {
      dl2_dialog   253                            if (pos>=max) continue;
    000005AE 53F3                   MOV.L       @(12,R15),R3
    000005B0 3D33                   CMP/GE      R3,R13
    000005B2 89BE                   BT          L559
      dl2_dialog   254    
      dl2_dialog   255                            s[pos++] = c;s[pos] = '\0';
    000005B4 60D3                   MOV         R13,R0
    000005B6 7D01                   ADD         #1,R13
    000005B8 0C44                   MOV.B       R4,@(R0,R12)
    000005BA              L577:                             
    000005BA 60D3                   MOV         R13,R0
    000005BC A00E                   BRA         L479
    000005BE 0CE4                   MOV.B       R14,@(R0,R12)
    000005C0              L563:                             
      dl2_dialog   256                            refresh = 1;
      dl2_dialog   257                    }
      dl2_dialog   258                    else
      dl2_dialog   259                    {
      dl2_dialog   260                            if (key==KEY_CTRL_DEL)
    000005C0 9414                   MOV.W       L584,R4    ; H'7549
    000005C2 63F2                   MOV.L       @R15,R3
    000005C4 3340                   CMP/EQ      R4,R3
    000005C6 8B03                   BF          L566
      dl2_dialog   261                            {




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   19


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

      dl2_dialog   262                                    if (pos<=0) continue;
    000005C8 4D15                   CMP/PL      R13
    000005CA 8BB2                   BF          L559
    000005CC AFF5                   BRA         L577
      dl2_dialog   263                                    s[--pos] = '\0';
    000005CE 7DFF                   ADD         #-1,R13
    000005D0              L566:                             
      dl2_dialog   264                                    refresh  = 1;
      dl2_dialog   265                            }
      dl2_dialog   266                            else if (key==KEY_CTRL_AC)
    000005D0 940D                   MOV.W       L584+2,R4  ; H'753F
    000005D2 63F2                   MOV.L       @R15,R3
    000005D4 3340                   CMP/EQ      R4,R3
    000005D6 8B03                   BF          L569
      dl2_dialog   267                            {
      dl2_dialog   268                                    *s              = 0;
    000005D8 2CE0                   MOV.B       R14,@R12
      dl2_dialog   269                                    pos             = 0;
    000005DA 6DE3                   MOV         R14,R13
    000005DC              L479:
      dl2_dialog   270                                    refresh = 1;
    000005DC AFA9                   BRA         L559
    000005DE EB01                   MOV         #1,R11
    000005E0              L569:                             
      dl2_dialog   271                            }
      dl2_dialog   272                            else if (key==KEY_CTRL_EXE) return 1;
    000005E0 9406                   MOV.W       L584+4,R4  ; H'7534
    000005E2 62F2                   MOV.L       @R15,R2
    000005E4 3240                   CMP/EQ      R4,R2
    000005E6 8B0F                   BF          L571
    000005E8 A013                   BRA         L572
    000005EA E001                   MOV         #1,R0
    000005EC              L584:                             
    000005EC 7549                   .DATA.W     H'7549
    000005EE 753F                   .DATA.W     H'753F
    000005F0 7534                   .DATA.W     H'7534
    000005F2 0000                   .DATA.W     0
    000005F4 <00000000>             .DATA.L     _strlen
    000005F8 <00000000>             .DATA.L     _area_clear
    000005FC <00000000>             .DATA.L     _PrintXY
    00000600 <00000000>             .DATA.L     L470
    00000604 <00000000>             .DATA.L     _GetKey
    00000608              L571:                             
      dl2_dialog   273                            else if (key==KEY_CTRL_EXIT) return 0;
    00000608 940D                   MOV.W       L585,R4    ; H'7532
    0000060A 63F2                   MOV.L       @R15,R3
    0000060C 3340                   CMP/EQ      R4,R3
    0000060E 8B90                   BF          L559
    00000610 E000                   MOV         #0,R0
    00000612              L572:                             
      dl2_dialog   274                            
      dl2_dialog   275                    }
      dl2_dialog   276                    
      dl2_dialog   277            }
      dl2_dialog   278    }
    00000612 7F18                   ADD         #24,R15
    00000614 4F26                   LDS.L       @R15+,PR




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   20


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    00000616 68F6                   MOV.L       @R15+,R8
    00000618 69F6                   MOV.L       @R15+,R9
    0000061A 6AF6                   MOV.L       @R15+,R10
    0000061C 6BF6                   MOV.L       @R15+,R11
    0000061E 6CF6                   MOV.L       @R15+,R12
    00000620 6DF6                   MOV.L       @R15+,R13
    00000622 000B                   RTS
    00000624 6EF6                   MOV.L       @R15+,R14
    00000626              L585:                             
    00000626 7532                   .DATA.W     H'7532
C   00000000              _ICON_QUST:                      ; static: ICON_QUST
    00000000 07E0081017             .DATA.B     H'07,H'E0,H'08,H'10,H'17,H'E8,H'28,H'14,H'53,H'CA,H'A7,H'E5,H'A6,H'65,H'A0,H'C5,
             E8281453CA +                       H'A1,H'85,H'A1,H'85,H'A0,H'05,H'51,H'8A,H'28,H'14,H'17,H'E8,H'08,H'10,H'07,H'E0
             A7E5A665A0   
             C5A185A185   
             A005518A28   
             1417E80810   
             07E0         
    00000020              _ICON_WAIT:                      ; static: ICON_WAIT
    00000020 1FF818181F             .DATA.B     H'1F,H'F8,H'18,H'18,H'1F,H'F8,H'08,H'10,H'08,H'50,H'05,H'20,H'02,H'C0,H'03,H'C0,
             F808100850 +                       H'03,H'40,H'06,H'A0,H'0D,H'50,H'0A,H'B0,H'0D,H'50,H'1F,H'F8,H'18,H'18,H'1F,H'F8
             052002C003   
             C0034006A0   
             0D500AB00D   
             501FF81818   
             1FF8         
    00000040              _ICON_WARN:                      ; static: ICON_WARN
    00000040 0180018003             .DATA.B     H'01,H'80,H'01,H'80,H'03,H'C0,H'02,H'40,H'06,H'60,H'04,H'20,H'0D,H'B0,H'09,H'90,
             C002400660 +                       H'19,H'98,H'11,H'88,H'31,H'8C,H'21,H'84,H'60,H'06,H'41,H'82,H'C0,H'03,H'FF,H'FF
             04200DB009   
             9019981188   
             318C218460   
             064182C003   
             FFFF         
    00000060              L402:
    00000060 5965733A45             .SDATA      "Yes:EXE No:EXIT"
             5845204E6F   
             3A45584954   
    0000006F 00                     .DATA.B     H'00
    00000070              L405:
    00000070 5965733A45             .SDATA      "Yes:EXE"
             5845         
    00000077 00                     .DATA.B     H'00
    00000078              L425:
    00000078 5C5C25735C             .SDATA      "\\%s\*.%s"
             2A2E2573     
    00000081 00                     .DATA.B     H'00
    00000082 00000002               .RES.W      1
    00000084              L426:
    00000084 666C7330               .SDATA      "fls0"
    00000088 00                     .DATA.B     H'00
    00000089 00000001               .RES.B      1
    0000008A 00000002               .RES.W      1
    0000008C              L427:
    0000008C 63726430               .SDATA      "crd0"
    00000090 00                     .DATA.B     H'00
    00000091 00000001               .RES.B      1




SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE   21


SCT OFFSET   CODE       C LABEL     INSTRUCTION OPERAND    COMMENT

    00000092 00000002               .RES.W      1
    00000094              L434:
    00000094 4F70656E20             .SDATA      "Open %s in %s"
             257320696E   
             202573       
    000000A1 00                     .DATA.B     H'00
    000000A2 00000002               .RES.W      1
    000000A4              L435:
    000000A4 53746F                 .SDATA      "Sto"
    000000A7 00                     .DATA.B     H'00
    000000A8              L436:
    000000A8 5344                   .SDATA      "SD"
    000000AA 00                     .DATA.B     H'00
    000000AB 00000001               .RES.B      1
    000000AC              L437:
    000000AC 53656C3A45             .SDATA      "Sel:EXE Can:EXIT"
             5845204361   
             6E3A455849   
             54           
    000000BC 00                     .DATA.B     H'00
    000000BD 00000001               .RES.B      1
    000000BE 00000002               .RES.W      1
    000000C0              L444:
    000000C0 E69200                 .DATA.B     H'E6,H'92,H'00
    000000C3 00000001               .RES.B      1
    000000C4              L446:
    000000C4 E69300                 .DATA.B     H'E6,H'93,H'00
    000000C7 00000001               .RES.B      1
    000000C8              L453:
    000000C8 5C5C25735C             .SDATA      "\\%s\%s"
             2573         
    000000CF 00                     .DATA.B     H'00
    000000D0              L470:
    000000D0 5F                     .SDATA      "_"
    000000D1 00                     .DATA.B     H'00


























SH SERIES C/C++ Compiler (Ver. 6.0C)                                                                 17-May-2020 11:39:23  PAGE    1


******** STATISTICS INFORMATION ********


********** ERROR INFORMATION ***********

NUMBER OF ERRORS:           0
NUMBER OF WARNINGS:         0




******* SOURCE LINE INFORMATION ********

COMPILED SOURCE LINE:      278



******* SECTION SIZE INFORMATION *******

PROGRAM  SECTION (P):                               00000628 Byte(s)
CONSTANT SECTION (C):                               000000D2 Byte(s)
DATA     SECTION (D):                               00000000 Byte(s)
BSS      SECTION (B):                               00000000 Byte(s)

 TOTAL PROGRAM SIZE: 000006FA Byte(s)



********** LABEL INFORMATION ***********

NUMBER OF EXTERNAL REFERENCE SYMBOLS:           25
NUMBER OF EXTERNAL DEFINITION SYMBOLS:           7
NUMBER OF INTERNAL/EXTERNAL SYMBOLS:           116






























*** COMMAND PARAMETER ***


  -subcommand=C:\Users\ADMINI~1\AppData\Local\Temp\hmk5512.tmp 

